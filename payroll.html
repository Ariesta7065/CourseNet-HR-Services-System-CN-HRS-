<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Payroll Management</title>
  <link rel="stylesheet" href="../style.css">
</head>
<body>
  <header>
    <h1>Payroll Management</h1>
    <nav>
      <ul>
        <li><a href="../index.html">Dashboard</a></li>
        <li><a href="attendance.html">Attendance</a></li>
        <li><a href="employee.html">Employee</a></li>
        <li><a href="leave.html">Leave Request</a></li>
        <li><a href="payroll.html" class="active">Payroll</a></li>
      </ul>
    </nav>
  </header>

  <main>
    <section class="form-section">
      <h2>Generate Payroll</h2>
      <form id="payrollForm">
        <label for="employeeName">Employee Name:</label>
        <input type="text" id="employeeName" required>

        <label for="basicSalary">Basic Salary (Rp):</label>
        <input type="number" id="basicSalary" required>

        <label for="bonus">Bonus (Rp):</label>
        <input type="number" id="bonus" value="0">

        <label for="deduction">Deduction (Rp):</label>
        <input type="number" id="deduction" value="0">

        <button type="submit">Calculate Payroll</button>
      </form>
    </section>

    <section class="table-section">
      <h2>Payroll Records</h2>
      <table id="payrollTable">
        <thead>
          <tr>
            <th>No</th>
            <th>Employee</th>
            <th>Basic Salary</th>
            <th>Bonus</th>
            <th>Deduction</th>
            <th>Total</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </section>
  </main>

  <footer>
    <p>Â© 2025 HR System | Made by Ariesta</p>
  </footer>

  <script>
    const payrollForm = document.getElementById('payrollForm');
    const payrollTableBody = document.querySelector('#payrollTable tbody');

    function loadPayrolls() {
      const payrolls = JSON.parse(localStorage.getItem('payrolls')) || [];
      payrollTableBody.innerHTML = '';
      payrolls.forEach((pay, index) => {
        const row = `<tr>
          <td>${index + 1}</td>
          <td>${pay.employeeName}</td>
          <td>Rp ${pay.basicSalary.toLocaleString()}</td>
          <td>Rp ${pay.bonus.toLocaleString()}</td>
          <td>Rp ${pay.deduction.toLocaleString()}</td>
          <td><strong>Rp ${pay.total.toLocaleString()}</strong></td>
        </tr>`;
        payrollTableBody.innerHTML += row;
      });
    }

    payrollForm.addEventListener('submit', (e) => {
      e.preventDefault();

      const basic = parseFloat(document.getElementById('basicSalary').value);
      const bonus = parseFloat(document.getElementById('bonus').value);
      const deduction = parseFloat(document.getElementById('deduction').value);
      const total = basic + bonus - deduction;

      const payroll = {
        employeeName: document.getElementById('employeeName').value,
        basicSalary: basic,
        bonus: bonus,
        deduction: deduction,
        total: total
      };

      const payrolls = JSON.parse(localStorage.getItem('payrolls')) || [];
      payrolls.push(payroll);
      localStorage.setItem('payrolls', JSON.stringify(payrolls));

      payrollForm.reset();
      loadPayrolls();
    });

    loadPayrolls();
  </script>
</body>
</html>
